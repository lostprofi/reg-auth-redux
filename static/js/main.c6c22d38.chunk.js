(this["webpackJsonpreg-auth-forms"]=this["webpackJsonpreg-auth-forms"]||[]).push([[0],{23:function(e,a,t){e.exports=t(37)},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(6),l=t(12),i=t.n(l),u=t(8),s=t(14),m=t(3),c={users:[],userAuthFlag:!1,isRegFormValid:!1,formControls:{regFormControls:{email:{value:"",type:"email",label:"Enter your mail",errorMessage:"Enter correct email",valid:{isValid:!1,errorMessage:""},touched:!1,validation:{required:!0,email:!0,unique:!0}},name:{value:"",type:"text",label:"Name",errorMessage:"Enter correct username",valid:{isValid:!1,errorMessage:""},touched:!1,validation:{required:!0,minLength:3}}},authFormControls:{email:{value:"",type:"email",label:"Enter your mail",errorMessage:"Enter correct email",valid:!1,touched:!1,validation:{required:!0,email:!0,exist:!0}}}},initFormControls:{regFormControls:{email:{value:"",type:"email",label:"Please enter your mail",errorMessage:"Enter correct email",valid:{isValid:!1,errorMessage:""},touched:!1,validation:{required:!0,email:!0,unique:!0}},name:{value:"",type:"text",label:"Name",errorMessage:"Enter correct username",valid:{isValid:!1,errorMessage:""},touched:!1,validation:{required:!0,minLength:3}}},authFormControls:{email:{value:"",type:"email",label:"Please enter your mail",errorMessage:"Enter correct email",valid:!1,touched:!1,validation:{required:!0,email:!0,exist:!0}}}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_USER":var t=e.users;return t.unshift(a.payload),t.length>10&&t.pop(),Object(m.a)({},e,{users:t});case"AUTH_MAIL":return Object(m.a)({},e,{authMail:a.payload});case"AUTH_USER":return Object(m.a)({},e,{userAuthFlag:a.payload});case"AUTH_FORM-CONTROL":var r=Object(m.a)({},e.formControls);return r.authFormControls.email=a.payload,Object(m.a)({},e,{formControls:r});case"REG_FORM-CONTROL":var n=Object(m.a)({},e.formControls);return n.regFormControls=a.payload,Object(m.a)({},e,{formControls:n});case"IS_REG-FORM_VALID":return Object(m.a)({},e,{isRegFormValid:a.payload});default:return e}},h=Object(s.b)(d),g=(t(32),t(9)),v=(t(33),t(34),function(e){var a=e,t=a.type||"text",r="".concat(t,"-").concat(Math.random()),o=function(e){var a=e.valid,t=e.touched,r=e.shouldValidate;return!a&&r&&t},l="";return o(a)&&(l="form-group_invalid"),n.a.createElement("div",{className:"form-group ".concat(l)},n.a.createElement("label",{htmlFor:r},a.label,n.a.createElement("input",{type:a.type,className:"form-control",id:r,name:a.name,onChange:a.onChange,value:a.value})),o(a)&&n.a.createElement("span",{className:"form-group__span"},a.errorMessage))}),f=function(e){var a=e,t=a.regInputsFormCtrls;return n.a.createElement("form",{onSubmit:a.onSubmit},Object.keys(t).map((function(e){var r=t[e];return n.a.createElement(v,{key:e,label:r.label,type:r.type,touched:r.touched,valid:r.valid.isValid,value:r.value,errorMessage:r.valid.errorMessage,shouldValidate:!!r.validation,onChange:function(t){return a.onChange(t,e)}})})),n.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!a.isRegFormValid},"Sign up"))},p=function(e){return{type:"AUTH_MAIL",payload:e}},b=function(e){return{type:"AUTH_USER",payload:e}},F=function(e){return{type:"AUTH_FORM-CONTROL",payload:e}};var E=Object(u.b)((function(e){return{users:e.users,regInputsFormCtrls:e.formControls.regFormControls,initRegFormControls:e.initFormControls.regFormControls,isRegFormValid:e.isRegFormValid}}),(function(e){return{addingUser:function(a){e(function(e){return{type:"ADD_USER",payload:e}}(a))},regFormControl:function(a){e(function(e){return{type:"REG_FORM-CONTROL",payload:e}}(a))},changeRegFormValid:function(a){e(function(e){return{type:"IS_REG-FORM_VALID",payload:e}}(a))}}}))((function(e){var a=e,t=Object(g.f)();var r=function(e,t){var r=!0,n="";return!t||(""===e&&(r=!1,n=""),t.required&&!1===(r=""!==e.trim()&&r)&&""===e&&(n="Fill in the field"),t.unique&&(0===a.users.length?r=r:!1===(r=a.users.some((function(a){return a.userEmail!==e}))&&r)&&""!==e&&(n="Email does exist")),t.email&&!1===(r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&r)&&""!==e&&(n="Invalid email"),{isValid:r,errorMessage:n})};return n.a.createElement(f,{onSubmit:function(e){e.preventDefault();var r=e.target.querySelectorAll("input"),n=Array.from(r),o={userEmail:n[0].value,userName:n[1].value};a.addingUser(o),a.regFormControl(a.initRegFormControls),a.changeRegFormValid(!1),t.push("/auth")},regInputsFormCtrls:a.regInputsFormCtrls,onChange:function(e,t){var n=e.target.value,o=Object(m.a)({},a.regInputsFormCtrls),l=Object(m.a)({},a.regInputsFormCtrls[t]);l.value=n,l.touched=!0,l.valid=r(l.value,l.validation),o[t]=l;var i=!0;Object.keys(o).forEach((function(e){i=o[e].valid.isValid&&i})),a.regFormControl(o),a.changeRegFormValid(i)},isRegFormValid:a.isRegFormValid})})),C=function(e){var a=e;return n.a.createElement("form",{onSubmit:a.onSubmit},n.a.createElement(v,{type:a.authMailFormCtrl.type,label:a.authMailFormCtrl.label,onChange:a.onChange,name:a.authMailFormCtrl.name,value:a.authMailFormCtrl.value,shouldValidate:!!a.authMailFormCtrl.validation,valid:a.authMailFormCtrl.valid.isValid,touched:a.authMailFormCtrl.touched,errorMessage:a.authMailFormCtrl.valid.errorMessage}),n.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!a.authMailFormCtrl.valid.isValid},"Sign in"))},y=Object(u.b)((function(e){return{users:e.users,store:e,authMail:e.authMail,authMailFormCtrl:e.formControls.authFormControls.email}}),(function(e){return{authMailToStore:function(a){e(p(a))},userAuth:function(a){e(b(a));var t=JSON.stringify(a);localStorage.setItem("userAuthFlag",t)},authFormControl:function(a){e(F(a))}}}))((function(e){var a=e,t=Object(g.f)();var r=function(e,t){var r=!0,n="";return!t||(t.required&&!1===(r=""!==e.trim()&&r)&&""===e&&(n="Fill in the field"),t.email&&!1===(r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&r)&&""!==e&&(n="Email does not exist"),t.exist&&!1===(r=a.users.some((function(a){return a.userEmail===e})))&&""!==e&&(n="Email is not registered"),{isValid:r,errorMessage:n})};return n.a.createElement(C,{onChange:function(e){var t=e.target.value;a.authMailToStore(t);var n=Object(m.a)({},a.authMailFormCtrl);n.value=t,n.touched=!0,n.valid=r(n.value,n.validation),a.authFormControl(n)},onSubmit:function(e){e.preventDefault();var r=a.users,n=a.authMail;r.forEach((function(e){if(e.userEmail===n){var r=JSON.stringify(e);localStorage.setItem("authUserData",r),a.userAuth(!0),t.push("/homepage")}}))},authMailFormCtrl:a.authMailFormCtrl})})),M=function(){var e=JSON.parse(localStorage.getItem("authUserData"));return n.a.createElement("div",null,n.a.createElement("h1",null,"Hello, ",e.userName))},O=function(){var e=JSON.parse(localStorage.authUserData);return n.a.createElement("div",null,n.a.createElement("h1",null,"Name: ",e.userName),n.a.createElement("h1",null,"e-mail: ",e.userEmail))},S=(t(36),Object(u.b)((function(e){return{authUserFlag:e.userAuthFlag,initAuthFormControls:e.initFormControls.authFormControls}}),(function(e){return{userOut:function(a,t){e(b(a)),e(p("")),e(F(t));var r=JSON.stringify(a);localStorage.setItem("userAuthFlag",r)}}}))((function(e){var a=e,t=JSON.parse(localStorage.getItem("userAuthFlag"));return n.a.createElement("div",{className:"container"},n.a.createElement("header",{className:"header"},null===t&&n.a.createElement(o.b,{to:"/registration",className:"btn btn-primary header__btn"},"Sign Up"),null===t&&n.a.createElement(o.b,{to:"/auth",className:"btn btn-primary header__btn"},"Sign in"),!1===t&&n.a.createElement(o.b,{to:"/registration",className:"btn btn-primary header__btn"},"Sign Up"),!1===t&&n.a.createElement(o.b,{to:"/auth",className:"btn btn-primary header__btn"},"Sign in"),t&&n.a.createElement(o.b,{to:"/profile",className:"btn btn-primary header__btn"},"Profile"),t&&n.a.createElement(o.b,{to:"/registration",className:"btn btn-primary header__btn",onClick:function(){localStorage.removeItem("authUserData"),a.userOut(!1,a.initAuthFormControls.email)}},"Sign out")),n.a.createElement("div",{className:"content"},n.a.createElement(g.c,null,n.a.createElement(g.a,{exact:!0,path:"/registration"},n.a.createElement(E,null)),n.a.createElement(g.a,{path:"/auth"},n.a.createElement(y,null)),n.a.createElement(g.a,{path:"/homepage"},n.a.createElement(M,null)),n.a.createElement(g.a,{path:"/profile"},n.a.createElement(O,null)))))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(u.a,{store:h},n.a.createElement(o.a,null,n.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.c6c22d38.chunk.js.map